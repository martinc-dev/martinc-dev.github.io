<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lease Buyout Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        input { margin: 5px; }
        #calculator label { display: inline-block; width: 200px; }
    </style>
</head>
<body>
    <h2>Lease Buyout vs. Flat Purchase Calculator</h2>
    <form id="calculator">
        <label>MSRP: </label><input type="number" id="msrp" value="66235"><br>
        <label>Lease Discount: </label><input type="number" id="leaseDiscount" value="10250"><br>
        <label>Flat Purchase Discount: </label><input type="number" id="purchaseDiscount" value="4000"><br>
        <label>Down Payment: </label><input type="number" id="downPayment" value="2000"><br>
        <label>Monthly Lease Payment (with tax): </label><input type="number" step="0.01" id="monthlyPayment" value="872.11"><br>
        <label>Residual Value: </label><input type="number" id="residualValue" value="37091.60"><br>
        <label>Dealer Admin Fee: </label><input type="number" id="adminFee" value="390"><br>
        <label>License Fee: </label><input type="number" id="licenseFee" value="200"><br>
        <label>Acquisition Fee: </label><input type="number" id="acquisitionFee" value="995"><br>
        <button type="button" onclick="calculateCosts()">Calculate</button>
    </form>

    <h3>Results</h3>
    <p>Calculated Money Factor: <span id="moneyFactor"></span></p>
    <p>Annual Percentage Yield (APY): <span id="apy"></span></p>
    <p>Lease Buyout Cost (Without Waiving Interest): <span id="buyoutNoWaive"></span></p>
    <p>Flat Purchase Cost: <span id="flatPurchase"></span></p>
    <p>Additional Cost Due to Unearned Interest: <span id="additionalCost"></span></p>

    <script>
        function calculateCosts() {
            const msrp = parseFloat(document.getElementById('msrp').value);
            const leaseDiscount = parseFloat(document.getElementById('leaseDiscount').value);
            const purchaseDiscount = parseFloat(document.getElementById('purchaseDiscount').value);
            const downPayment = parseFloat(document.getElementById('downPayment').value);
            const monthlyPayment = parseFloat(document.getElementById('monthlyPayment').value);
            const residualValue = parseFloat(document.getElementById('residualValue').value);
            const adminFee = parseFloat(document.getElementById('adminFee').value);
            const licenseFee = parseFloat(document.getElementById('licenseFee').value);
            const acquisitionFee = parseFloat(document.getElementById('acquisitionFee').value);

            const negotiatedPrice = msrp - leaseDiscount;
            const netCapCost = negotiatedPrice + adminFee + licenseFee + acquisitionFee - downPayment;
            const depreciationCharge = (netCapCost - residualValue) / 36;

            // Calculate the money factor
            const financeCharge = monthlyPayment - depreciationCharge;
            const moneyFactor = financeCharge / (netCapCost + residualValue);

            // Calculate the APY (approximately 2400 * Money Factor gives an APY estimate)
            const apr = moneyFactor * 2400;
            
            const totalFinanceCharge = financeCharge * 36;
            const remainingDepreciation = depreciationCharge * 35;
            const unearnedInterest = financeCharge * 35;

            const totalBuyoutCost = downPayment + monthlyPayment + residualValue + remainingDepreciation + unearnedInterest;
            const flatPurchaseCost = msrp - purchaseDiscount;

            document.getElementById('moneyFactor').textContent = moneyFactor.toFixed(5);
            document.getElementById('apy').textContent = apr.toFixed(2) + '%';
            document.getElementById('buyoutNoWaive').textContent = totalBuyoutCost.toFixed(2);
            document.getElementById('flatPurchase').textContent = flatPurchaseCost.toFixed(2);
            document.getElementById('additionalCost').textContent = (totalBuyoutCost - flatPurchaseCost).toFixed(2);
        }
    </script>
</body>
</html>